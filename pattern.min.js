/*

Pattern v3
A JavaScript router utilising the HTML5 history API. Compatible with modern browsers only (ES6+).

https://github.com/awj5/pattern

By Adam Johnson
MIT License 2019

Usage:

let patrn = new Pattern();
patrn.init(callBack);

history.pushState(null, null, 'about'); // Change URL with pushState

*/
"use strict";export class Pattern{constructor(a){this.path=a,this.pattern,this.storedParams=[]}init(a){this.callback=a;let c=history.pushState,b=this;history.pushState=function(){c.apply(history,arguments),b.urlHandler()},window.addEventListener("popstate",()=>{b.urlHandler()}),b.urlHandler()}urlHandler(){var a=location.pathname.replace(this.path,"");-1!==(a=a.replace("/","")).indexOf("?")&&(a=a.substr(0,a.indexOf("?"))),this.pattern=a||"home";var b=location.search.split("?").pop();b=new URLSearchParams(b);for(let c=0;c<this.storedParams.length;c++){var d=this.storedParams[c];b.has(d)||(this[d]="")}for(let e of(this.storedParams=[],b.entries())){let f=e[0];this[f]=e[1],this.storedParams.push(f)}this.callback()}}